<div class="sidenav" hide-xs>
    <h2 class="nav-journals-title">Journals</h2>
    <hr class="nav-title-divider">
    <button mat-raised-button (click)="openAddJournalDialog()" class="add-journal-button" id="addNewJournal">
        New Journal
    </button>
    <mat-card class="filter-fields">
        <mat-form-field class="example-form-field">
            <input matInput placeholder="Search titles" [(ngModel)]="journalTitle"/>
            <button mat-button *ngIf="journalTitle" matSuffix mat-icon-button aria-label="Clear" (click)="journalTitle=''">
                <mat-icon>close</mat-icon>
            </button>
        </mat-form-field>
        <mat-form-field class="example-form-field">
            <input matInput placeholder="Search content" [(ngModel)]="journalContent"/>
            <button mat-button *ngIf="journalContent" matSuffix mat-icon-button aria-label="Clear" (click)="journalContent=''">
                <mat-icon>close</mat-icon>
            </button>
        </mat-form-field>
    </mat-card>
    <mat-card class="prompt-card">
        <mat-card-content>
            <p> Click on the “refresh” button below to get a new journal prompt!</p>
            <button mat-raised-button id="newPrompt" (click)="RandomPrompt()" type="button">Refresh </button>

        </mat-card-content>
        <div class="PromptsBox">
            <p>{{prompt}}</p>
        </div>
    </mat-card>
</div>
<div class="grid-journals-section" hide-xs>
    <div layout="row" layout-wrap>
        <mat-card class="journals-card"
                  *ngFor="let journal of filterJournals(journalTitle, journalContent, journalDate) | dateSort: '-date'"
                  #elem [id]="journal._id['$oid']">
            <div class="journals-card-info">
                <mat-card-content class="journal-info">
                    <mat-card-title class="journal-name">
                        {{journal.title}}
                        <button mat-icon-button class="edit-journal action-button"
                                (click)="openEditJournalDialog(journal._id['$oid'], journal.title, journal.content, journal.date)">
                            <mat-icon matTooltip="Edit">mode_edit</mat-icon>
                        </button>
                        <button mat-icon-button class="delete-journal action-button"
                                (click)="deleteJournal(journal._id['$oid'])">
                            <mat-icon matTooltip="Delete">delete</mat-icon>
                        </button>
                        <button mat-raised-button routerLink="/journals/{{journal._id['$oid']}}" >
                            Open Page
                        </button>
                    </mat-card-title>
                    <mat-card-subtitle class="date-subtitle">
                        {{journal.date | date : "MMM d, yyyy 'at' h:mm a"}}
                    </mat-card-subtitle>
                    <mat-divider></mat-divider>
                    <p *ngIf="journal.content.length > 100">
                        {{journal.content | slice : 0:100}}
                        <a (click)="showMoreInfoDialog(journal.content)">
                            <button class="show-more-button">
                                ...show more
                            </button>
                        </a>
                    </p>
                    <p *ngIf="journal.content.length <100">
                        {{journal.content}}
                    </p>
                </mat-card-content>
            </div>
            <mat-card-actions>
            </mat-card-actions>
        </mat-card>
    </div>
</div>

<div class="list-journals-section" hide-gt-xs>
    <mat-form-field class="journals-mobile-search">
        <input matInput placeholder="Search" [(ngModel)]="journalTitle"/>
        <button mat-button *ngIf="journalTitle" matSuffix mat-icon-button aria-label="Clear" (click)="journalTitle=''">
            <mat-icon>close</mat-icon>
        </button>
    </mat-form-field>
    <mat-list class="journals-list">
        <div class="journals-list-info" *ngFor="let journal of filterJournals(journalTitle, journalContent, journalDate) | dateSort: '-date'"
             #elem [id]="journal._id['$oid']">
            <mat-list-item >
                <h3 matLine><strong>{{journal.title}}</strong></h3>
                <h5>{{journal.date | date : "MM/dd/yy"}}</h5>
                <h6 matLine>{{journal.content}}</h6>
            </mat-list-item>
            <mat-divider></mat-divider>
        </div>
    </mat-list>

    <button class="add-journal-fab-button" (click)="openAddJournalDialog()" mat-fab color="primary"><mat-icon>add</mat-icon></button>
</div>

